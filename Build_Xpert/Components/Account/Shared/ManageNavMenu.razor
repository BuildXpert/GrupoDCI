@using Microsoft.AspNetCore.Identity
@using Build_Xpert.Model
@using Build_Xpert.Services

@inject SignInManager<ApplicationUser> SignInManager

<div class="container mt-4">
    <div class="row">
        <div class="col-md-12 col-lg-10 ms-0">
            <h3 class="text-primary"><i class="bi bi-gear-fill"></i> Configuración de Cuenta</h3>
            <p class="text-muted">Administra tu perfil y seguridad de cuenta.</p>
            <hr>

            <ul class="list-group list-group-flush">
                <li class="list-group-item d-flex align-items-center">
                    <i class="bi bi-person-circle text-primary me-3" style="font-size: 1.5rem;"></i>
                    <NavLink class="nav-link text-dark fw-bold" href="Account/Manage">Perfil</NavLink>
                </li>

                <li class="list-group-item d-flex align-items-center">
                    <i class="bi bi-folder-check text-success me-3" style="font-size: 1.5rem;"></i>
                    <NavLink class="nav-link text-dark fw-bold" href="Account/Manage/MyProjects">Mis Proyectos</NavLink>
                </li>

                <li class="list-group-item d-flex align-items-center">
                    <i class="bi bi-envelope text-info me-3" style="font-size: 1.5rem;"></i>
                    <NavLink class="nav-link text-dark fw-bold" href="Account/Manage/Email">Correo Electrónico</NavLink>
                </li>

                <li class="list-group-item d-flex align-items-center">
                    <i class="bi bi-shield-lock text-danger me-3" style="font-size: 1.5rem;"></i>
                    <NavLink class="nav-link text-dark fw-bold" href="Account/Manage/ChangePassword">Contraseña</NavLink>
                </li>

                @if (hasExternalLogins)
                {
                    <li class="list-group-item d-flex align-items-center">
                        <i class="bi bi-box-arrow-in-right text-warning me-3" style="font-size: 1.5rem;"></i>
                        <NavLink class="nav-link text-dark fw-bold" href="Account/Manage/ExternalLogins">Inicios de Sesión Externos</NavLink>
                    </li>
                }

                <li class="list-group-item d-flex align-items-center">
                    <i class="bi bi-shield-check text-primary me-3" style="font-size: 1.5rem;"></i>
                    <NavLink class="nav-link text-dark fw-bold" href="Account/Manage/TwoFactorAuthentication">Autenticación 2FA</NavLink>
                </li>

                <li class="list-group-item d-flex align-items-center">
                    <i class="bi bi-person-lines-fill text-secondary me-3" style="font-size: 1.5rem;"></i>
                    <NavLink class="nav-link text-dark fw-bold" href="Account/Manage/PersonalData">Datos Personales</NavLink>
                </li>
            </ul>
        </div>
    </div>
</div>

@code {
    private bool hasExternalLogins;

    protected override async Task OnInitializedAsync()
    {
        hasExternalLogins = (await SignInManager.GetExternalAuthenticationSchemesAsync()).Any();
    }
}